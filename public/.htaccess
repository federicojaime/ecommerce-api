RewriteEngine On

# Verificar que mod_rewrite está funcionando
# Si esta regla funciona, deberías ver en los logs que se procesa
RewriteBase /ecommerce-api/public/

# Handle Authorization Header para JWT
RewriteCond %{HTTP:Authorization} .+
RewriteRule ^ - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

# Permitir acceso directo a archivos existentes
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Redireccionar todo a index.php
RewriteRule ^ index.php [QSA,L]

# Configuración de seguridad
<Files ".htaccess">
    Order Allow,Deny
    Deny from all
</Files>

# Configuración PHP para uploads
<IfModule mod_php.c>
    php_value upload_max_filesize 10M
    php_value post_max_size 12M
    php_value max_file_uploads 20
    php_value file_uploads On
</IfModule>