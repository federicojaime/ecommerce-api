RewriteEngine On
RewriteBase /ecommerce-api/public/

# Manejar Authorization Header
RewriteCond %{HTTP:Authorization} .+
RewriteRule ^ - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

# Permitir acceso directo a archivos de uploads (im치genes, etc.)
RewriteCond %{REQUEST_FILENAME} -f
RewriteCond %{REQUEST_URI} ^/ecommerce-api/public/uploads/
RewriteRule ^ - [L]

# Permitir acceso a archivos est치ticos existentes
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# Permitir acceso a directorios existentes
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Redirigir todo lo dem치s al front controller
RewriteRule ^ index.php [QSA,L]

# Headers para im치genes
<FilesMatch "\.(jpg|jpeg|png|gif|webp)$">
    Header set Cache-Control "max-age=31536000, public"
    Header set Access-Control-Allow-Origin "*"
</FilesMatch>